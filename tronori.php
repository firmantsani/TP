<?php
$file = 'kode.php';
$contents = file_get_contents($file);
preg_match('~(reff = "(.*?)";)~', $contents, $name);
//var_dump($name);
$akun = $name[2];//[mt_rand(1, 51) ];
$reff = $akun;
echo "Kode reff anda ".$reff;
//die();
include 'include/tronton.php';
echo "\nGenerate UA\n";
include 'include/model.php';
include 'include/build.php';
include 'include/versi.php';
$wallet = 'TEVHH'.$huruf1.''.$nomor1.''.$nomor5.'JWD'.$nomor4.'hZ'.$huruf.'stlow'.$huruf3.''.$huruf1.''.$huruf3.''.$huruf3.''.$nomor2.'q'.$huruf3.''.$huruf1.'k'.$huruf1.''.$huruf2.''.$huruf3.''.$huruf3.'';
var_dump($wallet);
//die();
$data = '{"address":"'.$wallet.'","deviceId":"'.$huruf.''.$nomor1.':'.$huruf1.''.$nomor2.':'.$nomor3.''.$huruf2.':'.$nomor2.''.$huruf1.':'.$huruf3.''.$nomor5.':'.$huruf1.''.$nomor1.'","system":"Android","invitedCode":"'.$reff.'"}';
$str = strlen($data);
$header[] = 'Host: list.tronlink.org';
$header[] = 'Connection: keep-alive';
$header[] = 'Content-Length: '.$str.'';
$header[] = 'Pragma: no-cache';
$header[] = 'Cache-Control: no-cache';
$header[] = 'Accept: application/json, text/plain, */*';
$header[] = 'Origin: https://dapp.tronlink.org';
$header[] = 'User-Agent: Mozilla/5.0 (Linux; Android '.$versi.'; '.$type.' Build/'.$build.') AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.84 Mobile Safari/537.36';
$header[] = 'Content-Type: application/json;charset=UTF-8';
$header[] = 'X-Requested-With: com.tronlinkpro.wallet';
$header[] = 'Sec-Fetch-Site: same-site';
$header[] = 'Sec-Fetch-Mode: cors';
$header[] = 'Referer: https://dapp.tronlink.org/';
//$header[] = 'Accept-Encoding: gzip, deflate';
$header[] = 'Accept-Language: id-ID,id;q=0.9,en-US;q=0.8,en;q=0.7';
$link = 'https://list.tronlink.org/api/wallet/invite/code';
//echo "\n".$data."\n";
$ch=curl_init();
curl_setopt($ch,CURLOPT_URL, $link);
curl_setopt($ch,CURLOPT_FOLLOWLOCATION,true);
curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,true);
curl_setopt($ch,CURLOPT_AUTOREFERER, false);
curl_setopt($ch,CURLOPT_COOKIESESSION, false);
curl_setopt($ch,CURLOPT_HTTPHEADER, $header);
curl_setopt($ch,CURLOPT_ENCODING, 'gzip, deflate');
curl_setopt($ch,CURLOPT_POSTFIELDS, $data);
curl_setopt($ch,CURLOPT_POST, true);
curl_setopt($ch,CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch,CURLOPT_COOKIEJAR, 'cookie.txt');
curl_setopt($ch,CURLOPT_COOKIEFILE, 'cookie.txt');
$hasil = curl_exec($ch);
curl_close($ch);
//var_dump($hasil);
$decode = json_decode($hasil,true);
$akun = $decode["message"];
//echo $akun."\n";
//die();
if($akun == "OK"){
echo "\nReff Sukses\n\n";
}else{
echo $akun."\n";
}
//system("clear");
system("rm cookie.txt");
system("php tron.php");
